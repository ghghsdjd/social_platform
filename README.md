# 一个Vue+springboot前后端分离的微社区项目

#### 介绍
一个Vue+springboot前后端分离的微社区项目
大概是一个论坛系统，写文章 点赞 关注 艾特等等功能，这是我自己写的第一个前后端分离项目。

功能模仿主要CSDN、知乎这两个平台。

a.写文章: 用户发布文章，可以 @“用户名”去提醒被艾特的用户，同时支持富文本编辑。
                    
b.阅读文章: 用户可以阅读本系统所有文章，每篇文章有文章的详细信息(点赞、收藏、是否原创等等)。可以对文章点赞、收藏、评论、举报等功能。

c.关注: 用户之间可以互相关注，有一个分栏是专门查看关注的用发的文章。

d.消息推送:例如，点赞、关注、评论、回复评论这些功能，都是要通知用户的。

e.个人主页:进入其他人的主页，可以选择关注、取关，查看他人的基本信息，动态、收藏之类的。进入自己的主页，可以编辑个人资料，删除一些动态、收藏。

f.简单的后台:对文章和用户管理，以及一些数据分析。


[线上地址](http://120.25.250.83/)（服务器到期了）   不支持IE浏览器，手机使用布局会乱(水平有限)

我没限制邮件注册用户数量，注册两个账号可以更好的体验功能哦

 tip:因为邮件推送是用的qq邮箱 发太多有可能被封

2021-5：增新的功能:
文章的转发、举报、后台管理 

2021-7-27：
消息推送由前端轮询====>后端rabbitMq+websoket主动推送


#### 软件架构
软件架构说明

版本: Vue2  Springboot2.2.6

前端:

Vue全家桶   Element Ui   整合了富文本编译

后端:


安全: shiro+jwt

缓存: redis

数据持久化: mybatis(95%的数据存放在mysql中) 、 redis（存放点赞 关注 收藏这些信息）

文件上传: 七牛云

邮件推送: qq邮箱

异步线程: @Async （邮件发送（耗时） 消息推送（点赞 关注 评论等等） 写文章中带 @username 去提醒(用户只关心发布文章是否成功)）

日志持久化: Aop切面

IP限流:不允许用户频繁的发送邮件

消息推送:RabbitMQ+Websocket


#### 安装教程

前端:

    1. 安装好node

    2. 更新npm版本(看你当前的版本是否需要) 我的版本 npm:6.14.4 @vue/cli 4.4.6

    3. 用Vscode 或者 WebStrom打开项目,根目录下执行  `npm install` 下载需要的依赖

    4. `npm run serve`启动
    
后端:

    1. 确保jdk版本大于1.8 有用到Lambda

    2. 本地安装好mysql redis

    3. IDEA要有安装有lombok插件

    4. 修改yml文件 改成你的配置就行了

    5.  **新增** :安装好rabbitMq

 #### 缺陷
 
前端:

    由于我是一边想一边写的，我没想到哪些地方的组件是可以复用，很多组件封装得不够完善，后期复用不了
    
    布局用了很多绝对定位，手机端打开布局会乱

后端:
     
     1.service层调用service层:

     如果是异步任务的话，其实是合理的。因为我有部分数据是用redis存的，mapper查询出来数据是不完整的，
     然后我就直接调用service,引发了很多问题，
     例如 事务、spring循环依赖。我现在觉得合理的方法是，用AOP增强。
     
     2.接受数据和返回数据: 
      
     我接受数据和返回数据一开始都是直接用实体类的，其实返回数据的时候并不需要把整个实体类的数据返回，接受参数也是。
    正确的做法是写dto，好处就是可以验证参数，不返回没用的字段。
    
     3.技术选型:  
      
     安全框架我是用的shiro+jwt,做完我才发现整个业务流程，都没涉及到角色权限、资源权限，只要登录就可以，
     根据登录身份就可以判断你是否有权限。做完之后，我想到了一个更好的解决方案，直接用redis存储token(token: userId),
     然后需要身份认证的接口直接用Aop或者拦截,这样更简单的执行逻辑。
     用shiro反而更麻烦，jwt自定义jwtFilter，springboot全局捕获异常是捕获不到filter里面的异常的。    
     
以上就是我觉得这个项目存在的缺陷，至于修改的话，过一段时间应该会修改的

#### 最后

   
     
     如果你觉得还行，点个star吧